(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[327],{IprL:function(e,t,n){"use strict";n.r(t),n.d(t,"view",(function(){return g})),n.d(t,"state",(function(){return p})),n.d(t,"history",(function(){return o})),n.d(t,"fold",(function(){return r})),n.d(t,"language",(function(){return U})),n.d(t,"languageData",(function(){return s})),n.d(t,"gutter",(function(){return i})),n.d(t,"commands",(function(){return l})),n.d(t,"matchbrackets",(function(){return a})),n.d(t,"closebrackets",(function(){return c})),n.d(t,"search",(function(){return u})),n.d(t,"autocomplete",(function(){return ti})),n.d(t,"comment",(function(){return h})),n.d(t,"rectangularSelection",(function(){return d})),n.d(t,"highlight",(function(){return xi})),n.d(t,"lint",(function(){return f})),n.d(t,"themeOneDark",(function(){return m})),n.d(t,"tooltip",(function(){return vi}));var o={};n.r(o),n.d(o,"history",(function(){return L})),n.d(o,"historyField",(function(){return w})),n.d(o,"historyKeymap",(function(){return z})),n.d(o,"invertedEffects",(function(){return v})),n.d(o,"isolateHistory",(function(){return x})),n.d(o,"redo",(function(){return C})),n.d(o,"redoDepth",(function(){return T})),n.d(o,"redoSelection",(function(){return A})),n.d(o,"undo",(function(){return S})),n.d(o,"undoDepth",(function(){return O})),n.d(o,"undoSelection",(function(){return M}));var i={};n.r(i),n.d(i,"GutterMarker",(function(){return H})),n.d(i,"gutter",(function(){return Q})),n.d(i,"gutters",(function(){return X})),n.d(i,"lineNumberMarkers",(function(){return ne})),n.d(i,"lineNumbers",(function(){return ae}));var r={};n.r(r),n.d(r,"codeFolding",(function(){return Se})),n.d(r,"foldAll",(function(){return ye})),n.d(r,"foldCode",(function(){return be})),n.d(r,"foldGutter",(function(){return Ee})),n.d(r,"foldKeymap",(function(){return Le})),n.d(r,"unfoldAll",(function(){return ke})),n.d(r,"unfoldCode",(function(){return xe}));var s={};n.r(s),n.d(s,"languages",(function(){return Pe}));var a={};n.r(a),n.d(a,"bracketMatching",(function(){return Ue})),n.d(a,"matchBrackets",(function(){return He}));var l={};n.r(l),n.d(l,"copyLineDown",(function(){return kn})),n.d(l,"copyLineUp",(function(){return yn})),n.d(l,"cursorCharBackward",(function(){return _e})),n.d(l,"cursorCharForward",(function(){return Ze})),n.d(l,"cursorCharLeft",(function(){return Xe})),n.d(l,"cursorCharRight",(function(){return Ye})),n.d(l,"cursorDocEnd",(function(){return Qt})),n.d(l,"cursorDocStart",(function(){return Wt})),n.d(l,"cursorGroupBackward",(function(){return it})),n.d(l,"cursorGroupForward",(function(){return ot})),n.d(l,"cursorGroupLeft",(function(){return tt})),n.d(l,"cursorGroupRight",(function(){return nt})),n.d(l,"cursorLineBoundaryBackward",(function(){return bt})),n.d(l,"cursorLineBoundaryForward",(function(){return pt})),n.d(l,"cursorLineDown",(function(){return ht})),n.d(l,"cursorLineEnd",(function(){return vt})),n.d(l,"cursorLineStart",(function(){return xt})),n.d(l,"cursorLineUp",(function(){return ut})),n.d(l,"cursorMatchingBracket",(function(){return kt})),n.d(l,"cursorPageDown",(function(){return mt})),n.d(l,"cursorPageUp",(function(){return ft})),n.d(l,"cursorSyntaxLeft",(function(){return at})),n.d(l,"cursorSyntaxRight",(function(){return lt})),n.d(l,"defaultKeymap",(function(){return jn})),n.d(l,"defaultTabBinding",(function(){return Pn})),n.d(l,"deleteCharBackward",(function(){return rn})),n.d(l,"deleteCharForward",(function(){return sn})),n.d(l,"deleteCodePointBackward",(function(){return nn})),n.d(l,"deleteCodePointForward",(function(){return on})),n.d(l,"deleteGroupBackward",(function(){return ln})),n.d(l,"deleteGroupForward",(function(){return cn})),n.d(l,"deleteLine",(function(){return Ln})),n.d(l,"deleteToLineEnd",(function(){return un})),n.d(l,"deleteToLineStart",(function(){return hn})),n.d(l,"deleteTrailingWhitespace",(function(){return dn})),n.d(l,"emacsStyleKeymap",(function(){return On})),n.d(l,"indentLess",(function(){return An})),n.d(l,"indentMore",(function(){return Mn})),n.d(l,"indentSelection",(function(){return Cn})),n.d(l,"insertNewline",(function(){return wn})),n.d(l,"insertNewlineAndIndent",(function(){return Dn})),n.d(l,"insertTab",(function(){return En})),n.d(l,"moveLineDown",(function(){return xn})),n.d(l,"moveLineUp",(function(){return bn})),n.d(l,"selectAll",(function(){return Xt})),n.d(l,"selectCharBackward",(function(){return At})),n.d(l,"selectCharForward",(function(){return Mt})),n.d(l,"selectCharLeft",(function(){return St})),n.d(l,"selectCharRight",(function(){return Ct})),n.d(l,"selectDocEnd",(function(){return Kt})),n.d(l,"selectDocStart",(function(){return $t})),n.d(l,"selectGroupBackward",(function(){return Pt})),n.d(l,"selectGroupForward",(function(){return jt})),n.d(l,"selectGroupLeft",(function(){return Ot})),n.d(l,"selectGroupRight",(function(){return Tt})),n.d(l,"selectLine",(function(){return Yt})),n.d(l,"selectLineBoundaryBackward",(function(){return Gt})),n.d(l,"selectLineBoundaryForward",(function(){return Ut})),n.d(l,"selectLineDown",(function(){return Vt})),n.d(l,"selectLineEnd",(function(){return Jt})),n.d(l,"selectLineStart",(function(){return Ht})),n.d(l,"selectLineUp",(function(){return Nt})),n.d(l,"selectMatchingBracket",(function(){return Lt})),n.d(l,"selectPageDown",(function(){return zt})),n.d(l,"selectPageUp",(function(){return Ft})),n.d(l,"selectParentSyntax",(function(){return Zt})),n.d(l,"selectSyntaxLeft",(function(){return Rt})),n.d(l,"selectSyntaxRight",(function(){return Bt})),n.d(l,"simplifySelection",(function(){return _t})),n.d(l,"splitLine",(function(){return fn})),n.d(l,"standardKeymap",(function(){return Tn})),n.d(l,"transposeChars",(function(){return mn}));var c={};n.r(c),n.d(c,"closeBrackets",(function(){return qn})),n.d(c,"closeBracketsKeymap",(function(){return Jn})),n.d(c,"deleteBracketPair",(function(){return Hn})),n.d(c,"insertBracket",(function(){return Wn}));var u={};n.r(u),n.d(u,"RegExpCursor",(function(){return fo})),n.d(u,"SearchCursor",(function(){return co})),n.d(u,"closeSearchPanel",(function(){return $o})),n.d(u,"findNext",(function(){return Fo})),n.d(u,"findPrevious",(function(){return zo})),n.d(u,"gotoLine",(function(){return yo})),n.d(u,"highlightSelectionMatches",(function(){return Do})),n.d(u,"openSearchPanel",(function(){return Qo})),n.d(u,"replaceAll",(function(){return Jo})),n.d(u,"replaceNext",(function(){return Ho})),n.d(u,"searchKeymap",(function(){return Ko})),n.d(u,"selectMatches",(function(){return Uo})),n.d(u,"selectSelectionMatches",(function(){return Go}));var h={};n.r(h),n.d(h,"blockComment",(function(){return li})),n.d(h,"blockUncomment",(function(){return ci})),n.d(h,"commentKeymap",(function(){return ui})),n.d(h,"lineComment",(function(){return ri})),n.d(h,"lineUncomment",(function(){return si})),n.d(h,"toggleBlockComment",(function(){return ai})),n.d(h,"toggleComment",(function(){return ni})),n.d(h,"toggleLineComment",(function(){return ii}));var d={};n.r(d),n.d(d,"rectangularSelection",(function(){return bi}));var f={};n.r(f),n.d(f,"closeLintPanel",(function(){return ji})),n.d(f,"lintKeymap",(function(){return Ri})),n.d(f,"linter",(function(){return Ii})),n.d(f,"nextDiagnostic",(function(){return Pi})),n.d(f,"openLintPanel",(function(){return Ti})),n.d(f,"setDiagnostics",(function(){return Di}));var m={};n.r(m),n.d(m,"oneDark",(function(){return tr})),n.d(m,"oneDarkHighlightStyle",(function(){return er})),n.d(m,"oneDarkTheme",(function(){return _i}));var g=n("AtEE"),p=n("4eob");const b=p.Annotation.define(),x=p.Annotation.define(),v=p.Facet.define(),y=p.Facet.define({combine:e=>Object(p.combineConfig)(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),k=p.StateField.define({create:()=>F.empty,update(e,t){let n=t.state.facet(y),o=t.annotation(b);if(o){let i=j.fromTransaction(t),r=o.side,s=0==r?e.undone:e.done;return s=i?P(s,s.length,n.minDepth,i):I(s,t.startState.selection),new F(0==r?o.rest:s,0==r?s:o.rest)}let i=t.annotation(x);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(p.Transaction.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let r=j.fromTransaction(t),s=t.annotation(p.Transaction.time),a=t.annotation(p.Transaction.userEvent);return r?e=e.addChanges(r,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new F(e.done.map(j.fromJSON),e.undone.map(j.fromJSON))});function L(e={}){return[k,y.of(e),g.EditorView.domEventHandlers({beforeinput:(e,t)=>"historyUndo"==e.inputType?S(t):"historyRedo"==e.inputType&&C(t)})]}const w=k;function D(e,t){return function({state:n,dispatch:o}){let i=n.field(k,!1);if(!i)return!1;let r=i.pop(e,n,t);return!!r&&(o(r),!0)}}const S=D(0,!1),C=D(1,!1),M=D(0,!0),A=D(1,!0);function E(e){return function(t){let n=t.field(k,!1);if(!n)return 0;let o=0==e?n.done:n.undone;return o.length-(o.length&&!o[0].changes?1:0)}}const O=E(0),T=E(1);class j{constructor(e,t,n,o,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=o,this.selectionsAfter=i}setSelAfter(e){return new j(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new j(e.changes&&p.ChangeSet.fromJSON(e.changes),[],e.mapped&&p.ChangeDesc.fromJSON(e.mapped),e.startSelection&&p.EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(p.EditorSelection.fromJSON))}static fromTransaction(e){let t=B;for(let n of e.startState.facet(v)){let o=n(e);o.length&&(t=t.concat(o))}return!t.length&&e.changes.empty?null:new j(e.changes.invert(e.startState.doc),t,void 0,e.startState.selection,B)}static selection(e){return new j(void 0,B,void 0,void 0,e)}}function P(e,t,n,o){let i=t+1>n+20?t-n-1:0,r=e.slice(i,t);return r.push(o),r}function R(e,t){return e.length?t.length?e.concat(t):e:t}const B=[];function I(e,t){if(e.length){let n=e[e.length-1],o=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return o.length&&o[o.length-1].eq(t)?e:(o.push(t),P(e,e.length-1,1e9,n.setSelAfter(o)))}return[j.selection([t])]}function N(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function V(e,t){if(!e.length)return e;let n=e.length,o=B;for(;n;){let i=q(e[n-1],t,o);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,o=i.selectionsAfter}return o.length?[j.selection(o)]:B}function q(e,t,n){let o=R(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):B,n);if(!e.changes)return j.selection(o);let i=e.changes.map(t),r=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(r):r;return new j(i,p.StateEffect.mapEffects(e.effects,t),s,e.startSelection.map(r),o)}class F{constructor(e,t,n=0,o){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new F(this.done,this.undone):this}addChanges(e,t,n,o,i){let r=this.done,s=r[r.length-1];return r=s&&s.changes&&t-this.prevTime<o&&!s.selectionsAfter.length&&!s.changes.empty&&e.changes&&function(e,t){let n=[],o=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,r)=>{for(let s=0;s<n.length;){let e=n[s++],t=n[s++];r>=e&&i<=t&&(o=!0)}})),o}(s.changes,e.changes)?P(r,r.length-1,i,new j(e.changes.compose(s.changes),R(e.effects,s.effects),s.mapped,s.startSelection,B)):P(r,r.length,i,e),new F(r,B,t,n)}addSelection(e,t,n,o){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:B;return i.length>0&&t-this.prevTime<o&&"keyboardselection"==n&&this.prevUserEvent==n&&(r=i[i.length-1],s=e,r.ranges.length==s.ranges.length&&0===r.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new F(I(this.done,e),this.undone,t,n);var r,s}addMapping(e){return new F(V(this.done,e),V(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let o=0==e?this.done:this.undone;if(0==o.length)return null;let i=o[o.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:b.of({side:e,rest:N(o)})});if(i.changes){let n=1==o.length?B:o.slice(0,o.length-1);return i.mapped&&(n=V(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:b.of({side:e,rest:n}),filter:!1})}return null}}F.empty=new F(B,B);const z=[{key:"Mod-z",run:S,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:C,preventDefault:!0},{key:"Mod-u",run:M,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:A,preventDefault:!0}];var U=n("yqQ+"),G=n("wG49");class H extends G.d{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}toDOM(e){return null}at(e){return this.range(e)}}H.prototype.elementClass="",H.prototype.mapMode=p.MapMode.TrackBefore;const J={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>G.b.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},W=p.Facet.define();function Q(e){return[X(),W.of(Object.assign(Object.assign({},J),e))]}const $=g.EditorView.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),K=p.Facet.define({combine:e=>e.some((e=>e))});function X(e){let t=[Y,$];return e&&!1===e.fixed&&t.push(K.of(!0)),t}const Y=g.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.gutters=e.state.facet(W).map((t=>new ee(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(K),this.fixed&&(this.dom.style.position="sticky"),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(!this.updateGutters(e))return;let t=this.gutters.map((e=>new _(e,this.view.viewport)));this.view.viewportLines((e=>{let n;if(Array.isArray(e.type)){for(let t of e.type)if(t.type==g.BlockType.Text){n=t;break}}else n=e.type==g.BlockType.Text?e:void 0;if(n)for(let o of t)o.line(this.view,n)}),0);for(let n of t)n.finish();this.dom.style.minHeight=this.view.contentHeight+"px",e.state.facet(K)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(e){let t=e.startState.facet(W),n=e.state.facet(W),o=e.docChanged||e.heightChanged||e.viewportChanged;if(t==n)for(let i of this.gutters)i.update(e)&&(o=!0);else{o=!0;let i=[];for(let o of n){let n=t.indexOf(o);n<0?i.push(new ee(this.view,o)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return o}destroy(){this.dom.remove()}},{provide:g.PluginField.scrollMargins.from((e=>0!=e.gutters.length&&e.fixed?e.view.textDirection==g.Direction.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}:null))});function Z(e){return Array.isArray(e)?e:[e]}class _{constructor(e,t){this.gutter=e,this.localMarkers=[],this.i=0,this.height=0,this.cursor=G.b.iter(e.markers,t.from)}line(e,t){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=t.from;)this.cursor.from==t.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();let n=this.gutter.config.lineMarker(e,t,this.localMarkers);n&&this.localMarkers.unshift(n);let o=this.gutter;if(0==this.localMarkers.length&&!o.config.renderEmptyElements)return;let i=t.top-this.height;if(this.i==o.elements.length){let n=new te(e,t.height,i,this.localMarkers);o.elements.push(n),o.dom.appendChild(n.dom)}else{let n=this.localMarkers,r=o.elements[this.i];(function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0})(n,r.markers)&&(n=r.markers,this.localMarkers.length=0),r.update(e,t.height,i,n)}this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}}class ee{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(o=>{let i=e.visualLineAtHeight(o.clientY,e.contentDOM.getBoundingClientRect().top);t.domEventHandlers[n](e,i,o)&&o.preventDefault()}));this.markers=Z(t.markers(e)),t.initialSpacer&&(this.spacer=new te(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Z(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}return this.markers!=t}}class te{constructor(e,t,n,o){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(e,t,n,o)}update(e,t,n,o){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),this.markers!=o){this.markers=o;for(let e;e=this.dom.lastChild;)e.remove();let t="cm-gutterElement";for(let n of o){let o=n.toDOM(e);o&&this.dom.appendChild(o);let i=n.elementClass;i&&(t+=" "+i)}this.dom.className=t}}}const ne=p.Facet.define(),oe=p.Facet.define({combine:e=>Object(p.combineConfig)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let o in t){let e=n[o],i=t[o];n[o]=e?(t,n,o)=>e(t,n,o)||i(t,n,o):i}return n}})});class ie extends H{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function re(e,t){return e.state.facet(oe).formatNumber(t,e.state)}const se=Q({class:"cm-lineNumbers",markers:e=>e.state.facet(ne),lineMarker:(e,t,n)=>n.length?null:new ie(re(e,e.state.doc.lineAt(t.from).number)),initialSpacer:e=>new ie(re(e,le(e.state.doc.lines))),updateSpacer(e,t){let n=re(t.view,le(t.view.state.doc.lines));return n==e.number?e:new ie(n)}});function ae(e={}){return[oe.of(e),se]}function le(e){let t=9;for(;t<e;)t=10*t+9;return t}function ce(e,t){let n=t.mapPos(e.from,1),o=t.mapPos(e.to,-1);return n>=o?void 0:{from:n,to:o}}const ue=p.StateEffect.define({map:ce}),he=p.StateEffect.define({map:ce});function de(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.visualLineAt(n));return t}const fe=p.StateField.define({create:()=>g.Decoration.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(ue)&&!ge(e,n.value.from,n.value.to)?e=e.update({add:[Ce.range(n.value.from,n.value.to)]}):n.is(he)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:o}=t.selection.main;e.between(o,o,((e,t)=>{e<o&&t>o&&(n=!0)})),n&&(e=e.update({filterFrom:o,filterTo:o,filter:(e,t)=>t<=o||e>=o}))}return e},provide:e=>g.EditorView.decorations.compute([e],(t=>t.field(e)))});function me(e,t,n){var o;let i=null;return null===(o=e.field(fe,!1))||void 0===o||o.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function ge(e,t,n){let o=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(o=!0)})),o}function pe(e,t){return e.field(fe,!1)?t:t.concat(p.StateEffect.appendConfig.of(Se()))}const be=e=>{for(let t of de(e)){let n=Object(U.foldable)(e.state,t.from,t.to);if(n)return e.dispatch({effects:pe(e.state,[ue.of(n),ve(e,n)])}),!0}return!1},xe=e=>{if(!e.state.field(fe,!1))return!1;let t=[];for(let n of de(e)){let o=me(e.state,n.from,n.to);o&&t.push(he.of(o),ve(e,o,!1))}return t.length&&e.dispatch({effects:t}),t.length>0};function ve(e,t,n=!0){let o=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return g.EditorView.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${o} ${e.state.phrase("to")} ${i}.`)}const ye=e=>{let{state:t}=e,n=[];for(let o=0;o<t.doc.length;){let i=e.visualLineAt(o),r=Object(U.foldable)(t,i.from,i.to);r&&n.push(ue.of(r)),o=(r?e.visualLineAt(r.to):i).to+1}return n.length&&e.dispatch({effects:pe(e.state,n)}),!!n.length},ke=e=>{let t=e.state.field(fe,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(he.of({from:e,to:t}))})),e.dispatch({effects:n}),!0},Le=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:be},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:xe},{key:"Ctrl-Alt-[",run:ye},{key:"Ctrl-Alt-]",run:ke}],we={placeholderDOM:null,placeholderText:"\u2026"},De=p.Facet.define({combine:e=>Object(p.combineConfig)(e,we)});function Se(e){let t=[fe,Oe];return e&&t.push(De.of(e)),t}const Ce=g.Decoration.replace({widget:new class extends g.WidgetType{ignoreEvents(){return!1}toDOM(e){let{state:t}=e,n=t.facet(De);if(n.placeholderDOM)return n.placeholderDOM();let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=t=>{let n=e.visualLineAt(e.posAtDOM(t.target)),o=me(e.state,n.from,n.to);o&&e.dispatch({effects:he.of(o)}),t.preventDefault()},o}}}),Me={openText:"\u2304",closedText:"\u203a"};class Ae extends H{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Ee(e={}){let t=Object.assign(Object.assign({},Me),e),n=new Ae(t,!0),o=new Ae(t,!1),i=g.ViewPlugin.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=G.b.of(this.buildMarkers(e))}update(e){let t=-1;e.changes.iterChangedRanges((e=>{t<0&&(t=e)}));let n=e.startState.field(fe,!1)!=e.state.field(fe,!1);if(!n&&e.docChanged&&e.view.viewport.from==this.from&&t>this.from){let n=e.view.visualLineAt(t).from;this.markers=this.markers.update({filter:()=>!1,filterFrom:n,add:this.buildMarkers(e.view,n)})}else(n||e.docChanged||e.viewportChanged)&&(this.from=e.view.viewport.from,this.markers=G.b.of(this.buildMarkers(e.view)))}buildMarkers(e,t=0){let i=[];return e.viewportLines((r=>{if(r.from>=t){let t=me(e.state,r.from,r.to)?o:Object(U.foldable)(e.state,r.from,r.to)?n:null;t&&i.push(t.range(r.from))}})),i}});return[i,Q({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||G.b.empty},initialSpacer:()=>new Ae(t,!1),domEventHandlers:{click:(e,t)=>{let n=me(e.state,t.from,t.to);if(n)return e.dispatch({effects:he.of(n)}),!0;let o=Object(U.foldable)(e.state,t.from,t.to);return!!o&&(e.dispatch({effects:ue.of(o)}),!0)}}}),Se()]}const Oe=g.EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter .cm-gutterElement":{padding:"0 1px",cursor:"pointer"}});function Te(e){return n.e(256).then(n.bind(null,"GSh6")).then((t=>new U.LanguageSupport(t.StreamLanguage.define(e))))}function je(e){return Promise.all([n.e(7),n.e(167)]).then(n.bind(null,"kd5f")).then((t=>t.sql({dialect:t[e]})))}const Pe=[U.LanguageDescription.of({name:"C",extensions:["c","h","ino"],load:()=>Promise.all([n.e(7),n.e(59)]).then(n.bind(null,"Svhn")).then((e=>e.cpp()))}),U.LanguageDescription.of({name:"C++",alias:["cpp"],extensions:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],load:()=>Promise.all([n.e(7),n.e(59)]).then(n.bind(null,"Svhn")).then((e=>e.cpp()))}),U.LanguageDescription.of({name:"CQL",alias:["cassandra"],extensions:["cql"],load:()=>je("Cassandra")}),U.LanguageDescription.of({name:"CSS",extensions:["css"],load:()=>Promise.all([n.e(7),n.e(10)]).then(n.bind(null,"Bxk6")).then((e=>e.css()))}),U.LanguageDescription.of({name:"HTML",alias:["xhtml"],extensions:["html","htm","handlebars","hbs"],load:()=>Promise.all([n.e(7),n.e(10),n.e(31)]).then(n.bind(null,"PQU8")).then((e=>e.html()))}),U.LanguageDescription.of({name:"Java",extensions:["java"],load:()=>Promise.all([n.e(7),n.e(163)]).then(n.bind(null,"7GUI")).then((e=>e.java()))}),U.LanguageDescription.of({name:"JavaScript",alias:["ecmascript","js","node"],extensions:["js","mjs","cjs"],load:()=>Promise.all([n.e(7),n.e(10)]).then(n.bind(null,"tzg4")).then((e=>e.javascript()))}),U.LanguageDescription.of({name:"JSON",alias:["json5"],extensions:["json","map"],load:()=>Promise.all([n.e(7),n.e(164)]).then(n.bind(null,"Uo6K")).then((e=>e.json()))}),U.LanguageDescription.of({name:"JSX",extensions:["jsx"],load:()=>Promise.all([n.e(7),n.e(10)]).then(n.bind(null,"tzg4")).then((e=>e.javascript({jsx:!0})))}),U.LanguageDescription.of({name:"MariaDB SQL",load:()=>je("MariaSQL")}),U.LanguageDescription.of({name:"Markdown",extensions:["md","markdown","mkd"],load:()=>Promise.all([n.e(7),n.e(10),n.e(31),n.e(30)]).then(n.bind(null,"S0tx")).then((e=>e.markdown()))}),U.LanguageDescription.of({name:"MS SQL",load:()=>je("MSSQL")}),U.LanguageDescription.of({name:"MySQL",load:()=>je("MySQL")}),U.LanguageDescription.of({name:"PLSQL",extensions:["pls"],load:()=>je("PLSQL")}),U.LanguageDescription.of({name:"PostgreSQL",load:()=>je("PostgreSQL")}),U.LanguageDescription.of({name:"Python",extensions:["BUILD","bzl","py","pyw"],filename:/^(BUCK|BUILD)$/,load:()=>Promise.all([n.e(7),n.e(165)]).then(n.bind(null,"pAYy")).then((e=>e.python()))}),U.LanguageDescription.of({name:"Rust",extensions:["rs"],load:()=>Promise.all([n.e(7),n.e(166)]).then(n.bind(null,"ALsg")).then((e=>e.rust()))}),U.LanguageDescription.of({name:"SQL",extensions:["sql"],load:()=>je("StandardSQL")}),U.LanguageDescription.of({name:"SQLite",load:()=>je("SQLite")}),U.LanguageDescription.of({name:"TSX",extensions:["tsx"],load:()=>Promise.all([n.e(7),n.e(10)]).then(n.bind(null,"tzg4")).then((e=>e.javascript({jsx:!0,typescript:!0})))}),U.LanguageDescription.of({name:"TypeScript",alias:["ts"],extensions:["ts"],load:()=>Promise.all([n.e(7),n.e(10)]).then(n.bind(null,"tzg4")).then((e=>e.javascript({typescript:!0})))}),U.LanguageDescription.of({name:"XML",alias:["rss","wsdl","xsd"],extensions:["xml","xsl","xsd","svg"],load:()=>Promise.all([n.e(7),n.e(168)]).then(n.bind(null,"Kccl")).then((e=>e.xml()))}),U.LanguageDescription.of({name:"APL",extensions:["dyalog","apl"],load:()=>n.e(169).then(n.bind(null,"g9VL")).then((e=>Te(e.apl)))}),U.LanguageDescription.of({name:"PGP",alias:["asciiarmor"],extensions:["asc","pgp","sig"],load:()=>n.e(170).then(n.bind(null,"96P/")).then((e=>Te(e.asciiArmor)))}),U.LanguageDescription.of({name:"ASN.1",extensions:["asn","asn1"],load:()=>n.e(171).then(n.bind(null,"wBE/")).then((e=>Te(e.asn1({}))))}),U.LanguageDescription.of({name:"Asterisk",filename:/^extensions\.conf$/i,load:()=>n.e(172).then(n.bind(null,"qy5e")).then((e=>Te(e.asterisk)))}),U.LanguageDescription.of({name:"Brainfuck",extensions:["b","bf"],load:()=>n.e(173).then(n.bind(null,"M3ys")).then((e=>Te(e.brainfuck)))}),U.LanguageDescription.of({name:"Cobol",extensions:["cob","cpy"],load:()=>n.e(175).then(n.bind(null,"jV/Y")).then((e=>Te(e.cobol)))}),U.LanguageDescription.of({name:"C#",alias:["csharp","cs"],extensions:["cs"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.csharp)))}),U.LanguageDescription.of({name:"Clojure",extensions:["clj","cljc","cljx"],load:()=>n.e(45).then(n.bind(null,"cSPx")).then((e=>Te(e.clojure)))}),U.LanguageDescription.of({name:"ClojureScript",extensions:["cljs"],load:()=>n.e(45).then(n.bind(null,"cSPx")).then((e=>Te(e.clojure)))}),U.LanguageDescription.of({name:"Closure Stylesheets (GSS)",extensions:["gss"],load:()=>n.e(46).then(n.bind(null,"OIku")).then((e=>Te(e.gss)))}),U.LanguageDescription.of({name:"CMake",extensions:["cmake","cmake.in"],filename:/^CMakeLists\.txt$/,load:()=>n.e(174).then(n.bind(null,"RHrG")).then((e=>Te(e.cmake)))}),U.LanguageDescription.of({name:"CoffeeScript",alias:["coffee","coffee-script"],extensions:["coffee"],load:()=>n.e(176).then(n.bind(null,"mpcK")).then((e=>Te(e.coffeeScript)))}),U.LanguageDescription.of({name:"Common Lisp",alias:["lisp"],extensions:["cl","lisp","el"],load:()=>n.e(177).then(n.bind(null,"IIfy")).then((e=>Te(e.commonLisp)))}),U.LanguageDescription.of({name:"Cypher",extensions:["cyp","cypher"],load:()=>n.e(179).then(n.bind(null,"Z15M")).then((e=>Te(e.cypher)))}),U.LanguageDescription.of({name:"Cython",extensions:["pyx","pxd","pxi"],load:()=>n.e(223).then(n.bind(null,"8PrD")).then((e=>Te(e.cython)))}),U.LanguageDescription.of({name:"Crystal",extensions:["cr"],load:()=>n.e(178).then(n.bind(null,"Yidh")).then((e=>Te(e.crystal)))}),U.LanguageDescription.of({name:"D",extensions:["d"],load:()=>n.e(180).then(n.bind(null,"nwm4")).then((e=>Te(e.d)))}),U.LanguageDescription.of({name:"Dart",extensions:["dart"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.dart)))}),U.LanguageDescription.of({name:"diff",extensions:["diff","patch"],load:()=>n.e(181).then(n.bind(null,"hTkR")).then((e=>Te(e.diff)))}),U.LanguageDescription.of({name:"Dockerfile",filename:/^Dockerfile$/,load:()=>Promise.all([n.e(10),n.e(182)]).then(n.bind(null,"Wzah")).then((e=>Te(e.dockerFile)))}),U.LanguageDescription.of({name:"DTD",extensions:["dtd"],load:()=>n.e(183).then(n.bind(null,"RfdW")).then((e=>Te(e.dtd)))}),U.LanguageDescription.of({name:"Dylan",extensions:["dylan","dyl","intr"],load:()=>n.e(184).then(n.bind(null,"67s+")).then((e=>Te(e.dylan)))}),U.LanguageDescription.of({name:"EBNF",load:()=>n.e(185).then(n.bind(null,"vIuv")).then((e=>Te(e.ebnf)))}),U.LanguageDescription.of({name:"ECL",extensions:["ecl"],load:()=>n.e(186).then(n.bind(null,"EvdV")).then((e=>Te(e.ecl)))}),U.LanguageDescription.of({name:"edn",extensions:["edn"],load:()=>n.e(45).then(n.bind(null,"cSPx")).then((e=>Te(e.clojure)))}),U.LanguageDescription.of({name:"Eiffel",extensions:["e"],load:()=>n.e(187).then(n.bind(null,"+CMO")).then((e=>Te(e.eiffel)))}),U.LanguageDescription.of({name:"Elm",extensions:["elm"],load:()=>n.e(188).then(n.bind(null,"Eu0O")).then((e=>Te(e.elm)))}),U.LanguageDescription.of({name:"Erlang",extensions:["erl"],load:()=>n.e(189).then(n.bind(null,"+L+n")).then((e=>Te(e.erlang)))}),U.LanguageDescription.of({name:"Esper",load:()=>n.e(49).then(n.bind(null,"oOL1")).then((e=>Te(e.esper)))}),U.LanguageDescription.of({name:"Factor",extensions:["factor"],load:()=>Promise.all([n.e(10),n.e(190)]).then(n.bind(null,"lhRg")).then((e=>Te(e.factor)))}),U.LanguageDescription.of({name:"FCL",load:()=>n.e(191).then(n.bind(null,"au/F")).then((e=>Te(e.fcl)))}),U.LanguageDescription.of({name:"Forth",extensions:["forth","fth","4th"],load:()=>n.e(192).then(n.bind(null,"/Lqz")).then((e=>Te(e.forth)))}),U.LanguageDescription.of({name:"Fortran",extensions:["f","for","f77","f90","f95"],load:()=>n.e(193).then(n.bind(null,"YzgE")).then((e=>Te(e.fortran)))}),U.LanguageDescription.of({name:"F#",alias:["fsharp"],extensions:["fs"],load:()=>n.e(47).then(n.bind(null,"oLAf")).then((e=>Te(e.fSharp)))}),U.LanguageDescription.of({name:"Gas",extensions:["s"],load:()=>n.e(194).then(n.bind(null,"ZPlC")).then((e=>Te(e.gas)))}),U.LanguageDescription.of({name:"Gherkin",extensions:["feature"],load:()=>n.e(195).then(n.bind(null,"FozL")).then((e=>Te(e.gherkin)))}),U.LanguageDescription.of({name:"Go",extensions:["go"],load:()=>n.e(196).then(n.bind(null,"griq")).then((e=>Te(e.go)))}),U.LanguageDescription.of({name:"Groovy",extensions:["groovy","gradle"],filename:/^Jenkinsfile$/,load:()=>n.e(197).then(n.bind(null,"Np2s")).then((e=>Te(e.groovy)))}),U.LanguageDescription.of({name:"Haskell",extensions:["hs"],load:()=>n.e(198).then(n.bind(null,"nxWY")).then((e=>Te(e.haskell)))}),U.LanguageDescription.of({name:"Haxe",extensions:["hx"],load:()=>n.e(60).then(n.bind(null,"pUO9")).then((e=>Te(e.haxe)))}),U.LanguageDescription.of({name:"HXML",extensions:["hxml"],load:()=>n.e(60).then(n.bind(null,"pUO9")).then((e=>Te(e.hxml)))}),U.LanguageDescription.of({name:"HTTP",load:()=>n.e(199).then(n.bind(null,"+Tez")).then((e=>Te(e.http)))}),U.LanguageDescription.of({name:"IDL",extensions:["pro"],load:()=>n.e(200).then(n.bind(null,"MXbv")).then((e=>Te(e.idl)))}),U.LanguageDescription.of({name:"JSON-LD",alias:["jsonld"],extensions:["jsonld"],load:()=>n.e(201).then(n.bind(null,"tsaj")).then((e=>Te(e.jsonld)))}),U.LanguageDescription.of({name:"Jinja2",extensions:["j2","jinja","jinja2"],load:()=>n.e(202).then(n.bind(null,"cCsL")).then((e=>Te(e.jinja2)))}),U.LanguageDescription.of({name:"Julia",extensions:["jl"],load:()=>n.e(203).then(n.bind(null,"I2Bw")).then((e=>Te(e.julia)))}),U.LanguageDescription.of({name:"Kotlin",extensions:["kt"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.kotlin)))}),U.LanguageDescription.of({name:"LESS",extensions:["less"],load:()=>n.e(46).then(n.bind(null,"OIku")).then((e=>Te(e.less)))}),U.LanguageDescription.of({name:"LiveScript",alias:["ls"],extensions:["ls"],load:()=>n.e(204).then(n.bind(null,"RYTb")).then((e=>Te(e.liveScript)))}),U.LanguageDescription.of({name:"Lua",extensions:["lua"],load:()=>n.e(205).then(n.bind(null,"uvw6")).then((e=>Te(e.lua)))}),U.LanguageDescription.of({name:"mIRC",load:()=>n.e(208).then(n.bind(null,"F4Vt")).then((e=>Te(e.mirc)))}),U.LanguageDescription.of({name:"Mathematica",extensions:["m","nb","wl","wls"],load:()=>n.e(206).then(n.bind(null,"PzU8")).then((e=>Te(e.mathematica)))}),U.LanguageDescription.of({name:"Modelica",extensions:["mo"],load:()=>n.e(209).then(n.bind(null,"3/kI")).then((e=>Te(e.modelica)))}),U.LanguageDescription.of({name:"MUMPS",extensions:["mps"],load:()=>n.e(210).then(n.bind(null,"ULPp")).then((e=>Te(e.mumps)))}),U.LanguageDescription.of({name:"mbox",extensions:["mbox"],load:()=>n.e(207).then(n.bind(null,"Q18N")).then((e=>Te(e.mbox)))}),U.LanguageDescription.of({name:"Nginx",filename:/nginx.*\.conf$/i,load:()=>n.e(211).then(n.bind(null,"ICq2")).then((e=>Te(e.nginx)))}),U.LanguageDescription.of({name:"NSIS",extensions:["nsh","nsi"],load:()=>Promise.all([n.e(10),n.e(212)]).then(n.bind(null,"8u88")).then((e=>Te(e.nsis)))}),U.LanguageDescription.of({name:"NTriples",extensions:["nt","nq"],load:()=>n.e(213).then(n.bind(null,"lBKo")).then((e=>Te(e.ntriples)))}),U.LanguageDescription.of({name:"Objective-C",alias:["objective-c","objc"],extensions:["m"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.objectiveC)))}),U.LanguageDescription.of({name:"Objective-C++",alias:["objective-c++","objc++"],extensions:["mm"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.objectiveCpp)))}),U.LanguageDescription.of({name:"OCaml",extensions:["ml","mli","mll","mly"],load:()=>n.e(47).then(n.bind(null,"oLAf")).then((e=>Te(e.oCaml)))}),U.LanguageDescription.of({name:"Octave",extensions:["m"],load:()=>n.e(214).then(n.bind(null,"yWou")).then((e=>Te(e.octave)))}),U.LanguageDescription.of({name:"Oz",extensions:["oz"],load:()=>n.e(215).then(n.bind(null,"nFh2")).then((e=>Te(e.oz)))}),U.LanguageDescription.of({name:"Pascal",extensions:["p","pas"],load:()=>n.e(216).then(n.bind(null,"qxHX")).then((e=>Te(e.pascal)))}),U.LanguageDescription.of({name:"Perl",extensions:["pl","pm"],load:()=>n.e(217).then(n.bind(null,"uZCc")).then((e=>Te(e.perl)))}),U.LanguageDescription.of({name:"Pig",extensions:["pig"],load:()=>n.e(218).then(n.bind(null,"Azj+")).then((e=>Te(e.pig)))}),U.LanguageDescription.of({name:"PowerShell",extensions:["ps1","psd1","psm1"],load:()=>n.e(219).then(n.bind(null,"hwb1")).then((e=>Te(e.powerShell)))}),U.LanguageDescription.of({name:"Properties files",alias:["ini","properties"],extensions:["properties","ini","in"],load:()=>n.e(220).then(n.bind(null,"IAoW")).then((e=>Te(e.properties)))}),U.LanguageDescription.of({name:"ProtoBuf",extensions:["proto"],load:()=>n.e(221).then(n.bind(null,"IzQd")).then((e=>Te(e.protobuf)))}),U.LanguageDescription.of({name:"Puppet",extensions:["pp"],load:()=>n.e(222).then(n.bind(null,"0DmX")).then((e=>Te(e.puppet)))}),U.LanguageDescription.of({name:"Q",extensions:["q"],load:()=>n.e(224).then(n.bind(null,"65TJ")).then((e=>Te(e.q)))}),U.LanguageDescription.of({name:"R",alias:["rscript"],extensions:["r","R"],load:()=>n.e(225).then(n.bind(null,"j/lf")).then((e=>Te(e.r)))}),U.LanguageDescription.of({name:"RPM Changes",load:()=>n.e(61).then(n.bind(null,"8U6X")).then((e=>Te(e.rpmChanges)))}),U.LanguageDescription.of({name:"RPM Spec",extensions:["spec"],load:()=>n.e(61).then(n.bind(null,"8U6X")).then((e=>Te(e.rpmSpec)))}),U.LanguageDescription.of({name:"Ruby",alias:["jruby","macruby","rake","rb","rbx"],extensions:["rb"],load:()=>n.e(226).then(n.bind(null,"DkjX")).then((e=>Te(e.ruby)))}),U.LanguageDescription.of({name:"SAS",extensions:["sas"],load:()=>n.e(227).then(n.bind(null,"kGTw")).then((e=>Te(e.sas)))}),U.LanguageDescription.of({name:"Scala",extensions:["scala"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.scala)))}),U.LanguageDescription.of({name:"Scheme",extensions:["scm","ss"],load:()=>n.e(228).then(n.bind(null,"t0Vk")).then((e=>Te(e.scheme)))}),U.LanguageDescription.of({name:"SCSS",extensions:["scss"],load:()=>n.e(46).then(n.bind(null,"OIku")).then((e=>Te(e.sCSS)))}),U.LanguageDescription.of({name:"Shell",alias:["bash","sh","zsh"],extensions:["sh","ksh","bash"],filename:/^PKGBUILD$/,load:()=>n.e(229).then(n.bind(null,"rllI")).then((e=>Te(e.shell)))}),U.LanguageDescription.of({name:"Sieve",extensions:["siv","sieve"],load:()=>n.e(230).then(n.bind(null,"goX1")).then((e=>Te(e.sieve)))}),U.LanguageDescription.of({name:"Smalltalk",extensions:["st"],load:()=>n.e(231).then(n.bind(null,"/iFA")).then((e=>Te(e.smalltalk)))}),U.LanguageDescription.of({name:"Solr",load:()=>n.e(232).then(n.bind(null,"A4kd")).then((e=>Te(e.solr)))}),U.LanguageDescription.of({name:"SML",extensions:["sml","sig","fun","smackspec"],load:()=>n.e(47).then(n.bind(null,"oLAf")).then((e=>Te(e.sml)))}),U.LanguageDescription.of({name:"SPARQL",alias:["sparul"],extensions:["rq","sparql"],load:()=>n.e(233).then(n.bind(null,"tRWl")).then((e=>Te(e.sparql)))}),U.LanguageDescription.of({name:"Spreadsheet",alias:["excel","formula"],load:()=>n.e(234).then(n.bind(null,"NwTP")).then((e=>Te(e.spreadsheet)))}),U.LanguageDescription.of({name:"SQL",extensions:["sql"],load:()=>n.e(49).then(n.bind(null,"oOL1")).then((e=>Te(e.standardSQL)))}),U.LanguageDescription.of({name:"SQLite",load:()=>n.e(49).then(n.bind(null,"oOL1")).then((e=>Te(e.sqlite)))}),U.LanguageDescription.of({name:"Squirrel",extensions:["nut"],load:()=>n.e(28).then(n.bind(null,"SR4r")).then((e=>Te(e.squirrel)))}),U.LanguageDescription.of({name:"Stylus",extensions:["styl"],load:()=>n.e(235).then(n.bind(null,"Ipt9")).then((e=>Te(e.stylus)))}),U.LanguageDescription.of({name:"Swift",extensions:["swift"],load:()=>n.e(236).then(n.bind(null,"csCD")).then((e=>Te(e.swift)))}),U.LanguageDescription.of({name:"sTeX",load:()=>n.e(62).then(n.bind(null,"5DRb")).then((e=>Te(e.stex)))}),U.LanguageDescription.of({name:"LaTeX",alias:["tex"],extensions:["text","ltx","tex"],load:()=>n.e(62).then(n.bind(null,"5DRb")).then((e=>Te(e.stex)))}),U.LanguageDescription.of({name:"SystemVerilog",extensions:["v","sv","svh"],load:()=>n.e(63).then(n.bind(null,"/UVJ")).then((e=>Te(e.verilog)))}),U.LanguageDescription.of({name:"Tcl",extensions:["tcl"],load:()=>n.e(237).then(n.bind(null,"lEgO")).then((e=>Te(e.tcl)))}),U.LanguageDescription.of({name:"Textile",extensions:["textile"],load:()=>n.e(238).then(n.bind(null,"3whL")).then((e=>Te(e.textile)))}),U.LanguageDescription.of({name:"TiddlyWiki",load:()=>n.e(239).then(n.bind(null,"SNaM")).then((e=>Te(e.tiddlyWiki)))}),U.LanguageDescription.of({name:"Tiki wiki",load:()=>n.e(240).then(n.bind(null,"UpF4")).then((e=>Te(e.tiki)))}),U.LanguageDescription.of({name:"TOML",extensions:["toml"],load:()=>n.e(241).then(n.bind(null,"w4+J")).then((e=>Te(e.toml)))}),U.LanguageDescription.of({name:"troff",extensions:["1","2","3","4","5","6","7","8","9"],load:()=>n.e(242).then(n.bind(null,"jIa3")).then((e=>Te(e.troff)))}),U.LanguageDescription.of({name:"TTCN",extensions:["ttcn","ttcn3","ttcnpp"],load:()=>n.e(244).then(n.bind(null,"OAZt")).then((e=>Te(e.ttcn)))}),U.LanguageDescription.of({name:"TTCN_CFG",extensions:["cfg"],load:()=>n.e(243).then(n.bind(null,"b5NJ")).then((e=>Te(e.ttcnCfg)))}),U.LanguageDescription.of({name:"Turtle",extensions:["ttl"],load:()=>n.e(245).then(n.bind(null,"MeIH")).then((e=>Te(e.turtle)))}),U.LanguageDescription.of({name:"Web IDL",extensions:["webidl"],load:()=>n.e(251).then(n.bind(null,"7CpF")).then((e=>Te(e.webIDL)))}),U.LanguageDescription.of({name:"VB.NET",extensions:["vb"],load:()=>n.e(246).then(n.bind(null,"iFd0")).then((e=>Te(e.vb)))}),U.LanguageDescription.of({name:"VBScript",extensions:["vbs"],load:()=>n.e(247).then(n.bind(null,"dzOX")).then((e=>Te(e.vbScript)))}),U.LanguageDescription.of({name:"Velocity",extensions:["vtl"],load:()=>n.e(248).then(n.bind(null,"KcTb")).then((e=>Te(e.velocity)))}),U.LanguageDescription.of({name:"Verilog",extensions:["v"],load:()=>n.e(63).then(n.bind(null,"/UVJ")).then((e=>Te(e.verilog)))}),U.LanguageDescription.of({name:"VHDL",extensions:["vhd","vhdl"],load:()=>n.e(249).then(n.bind(null,"Ptms")).then((e=>Te(e.vhdl)))}),U.LanguageDescription.of({name:"XQuery",extensions:["xy","xquery"],load:()=>n.e(252).then(n.bind(null,"m+MU")).then((e=>Te(e.xQuery)))}),U.LanguageDescription.of({name:"Yacas",extensions:["ys"],load:()=>n.e(253).then(n.bind(null,"K/14")).then((e=>Te(e.yacas)))}),U.LanguageDescription.of({name:"YAML",alias:["yml"],extensions:["yaml","yml"],load:()=>n.e(254).then(n.bind(null,"m9fM")).then((e=>Te(e.yaml)))}),U.LanguageDescription.of({name:"Z80",extensions:["z80"],load:()=>n.e(255).then(n.bind(null,"5HJn")).then((e=>Te(e.z80)))}),U.LanguageDescription.of({name:"mscgen",extensions:["mscgen","mscin","msc"],load:()=>n.e(48).then(n.bind(null,"leU/")).then((e=>Te(e.mscgen)))}),U.LanguageDescription.of({name:"xu",extensions:["xu"],load:()=>n.e(48).then(n.bind(null,"leU/")).then((e=>Te(e.xu)))}),U.LanguageDescription.of({name:"msgenny",extensions:["msgenny"],load:()=>n.e(48).then(n.bind(null,"leU/")).then((e=>Te(e.msgenny)))}),U.LanguageDescription.of({name:"WebAssembly",extensions:["wat","wast"],load:()=>Promise.all([n.e(10),n.e(250)]).then(n.bind(null,"fTjj")).then((e=>Te(e.wast)))})];var Re=n("uZp5"),Be=n("WQMp");const Ie=g.EditorView.baseTheme({".cm-matchingBracket":{color:"#0b0"},".cm-nonmatchingBracket":{color:"#a22"}}),Ne="()[]{}",Ve=p.Facet.define({combine:e=>Object(p.combineConfig)(e,{afterCursor:!0,brackets:Ne,maxScanDistance:1e4})}),qe=g.Decoration.mark({class:"cm-matchingBracket"}),Fe=g.Decoration.mark({class:"cm-nonmatchingBracket"}),ze=[p.StateField.define({create:()=>g.Decoration.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],o=t.state.facet(Ve);for(let i of t.state.selection.ranges){if(!i.empty)continue;let e=He(t.state,i.head,-1,o)||i.head>0&&He(t.state,i.head-1,1,o)||o.afterCursor&&(He(t.state,i.head,1,o)||i.head<t.state.doc.length&&He(t.state,i.head+1,-1,o));if(!e)continue;let r=e.matched?qe:Fe;n.push(r.range(e.start.from,e.start.to)),e.end&&n.push(r.range(e.end.from,e.end.to))}return g.Decoration.set(n,!0)},provide:e=>g.EditorView.decorations.from(e)}),Ie];function Ue(e={}){return[Ve.of(e),ze]}function Ge(e,t,n){let o=e.prop(t<0?Be.b.openedBy:Be.b.closedBy);if(o)return o;if(1==e.name.length){let o=n.indexOf(e.name);if(o>-1&&o%2==(t<0?1:0))return[n[o+t]]}return null}function He(e,t,n,o={}){let i,r=o.maxScanDistance||1e4,s=o.brackets||Ne,a=Object(U.syntaxTree)(e),l=a.resolve(t,n);return(i=Ge(l.type,n,s))?function(e,t,n,o,i,r){let s=o.parent,a={from:o.from,to:o.to},l=0,c=null===s||void 0===s?void 0:s.cursor;if(c&&(n<0?c.childBefore(o.from):c.childAfter(o.to)))do{if(n<0?c.to<=o.from:c.from>=o.to){if(0==l&&i.indexOf(c.type.name)>-1)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Ge(c.type,n,r))l++;else if(Ge(c.type,-n,r)&&(l--,0==l))return{start:a,end:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}(0,0,n,l,i,s):function(e,t,n,o,i,r,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=r;){let e=u.value;n<0&&(d+=e.length);let r=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=s.indexOf(e[t]);if(!(a<0||o.resolve(r+t,1).type!=i))if(a%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:r+t,to:r+t+1},matched:a>>1==l>>1};h--}}n>0&&(d+=e.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,a,l.type,r,s)}function Je(e,t){return p.EditorSelection.create(e.ranges.map(t),e.mainIndex)}function We(e,t){return e.update({selection:t,scrollIntoView:!0,annotations:p.Transaction.userEvent.of("keyboardselection")})}function Qe({state:e,dispatch:t},n){let o=Je(e.selection,n);return!o.eq(e.selection)&&(t(We(e,o)),!0)}function $e(e,t){return p.EditorSelection.cursor(t?e.to:e.from)}function Ke(e,t){return Qe(e,(n=>n.empty?e.moveByChar(n,t):$e(n,t)))}const Xe=e=>Ke(e,e.textDirection!=g.Direction.LTR),Ye=e=>Ke(e,e.textDirection==g.Direction.LTR),Ze=e=>Ke(e,!0),_e=e=>Ke(e,!1);function et(e,t){return Qe(e,(n=>n.empty?e.moveByGroup(n,t):$e(n,t)))}const tt=e=>et(e,e.textDirection!=g.Direction.LTR),nt=e=>et(e,e.textDirection==g.Direction.LTR),ot=e=>et(e,!0),it=e=>et(e,!1);function rt(e,t,n){if(t.type.prop(n))return!0;let o=t.to-t.from;return o&&(o>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function st(e,t,n){let o,i,r=Object(U.syntaxTree)(e).resolve(t.head),s=n?Be.b.closedBy:Be.b.openedBy;for(let a=t.head;;){let t=n?r.childAfter(a):r.childBefore(a);if(!t)break;rt(e,t,s)?r=t:a=n?t.to:t.from}return i=r.type.prop(s)&&(o=n?He(e,r.from,1):He(e,r.to,-1))&&o.matched?n?o.end.to:o.end.from:n?r.to:r.from,p.EditorSelection.cursor(i,n?-1:1)}const at=e=>Qe(e,(t=>st(e.state,t,e.textDirection!=g.Direction.LTR))),lt=e=>Qe(e,(t=>st(e.state,t,e.textDirection==g.Direction.LTR)));function ct(e,t){return Qe(e,(n=>n.empty?e.moveVertically(n,t):$e(n,t)))}const ut=e=>ct(e,!1),ht=e=>ct(e,!0);function dt(e,t){return Qe(e,(n=>n.empty?e.moveVertically(n,t,e.dom.clientHeight):$e(n,t)))}const ft=e=>dt(e,!1),mt=e=>dt(e,!0);function gt(e,t,n){let o=e.visualLineAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?o.to:o.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==o.from&&o.length){let n=/^\s*/.exec(e.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;n&&t.head!=o.from+n&&(i=p.EditorSelection.cursor(o.from+n))}return i}const pt=e=>Qe(e,(t=>gt(e,t,!0))),bt=e=>Qe(e,(t=>gt(e,t,!1))),xt=e=>Qe(e,(t=>p.EditorSelection.cursor(e.visualLineAt(t.head).from,1))),vt=e=>Qe(e,(t=>p.EditorSelection.cursor(e.visualLineAt(t.head).to,-1)));function yt(e,t,n){let o=!1,i=Je(e.selection,(t=>{let i=He(e,t.head,-1)||He(e,t.head,1)||t.head>0&&He(e,t.head-1,1)||t.head<e.doc.length&&He(e,t.head+1,-1);if(!i||!i.end)return t;o=!0;let r=i.start.from==t.head?i.end.to:i.end.from;return n?p.EditorSelection.range(t.anchor,r):p.EditorSelection.cursor(r)}));return!!o&&(t(We(e,i)),!0)}const kt=({state:e,dispatch:t})=>yt(e,t,!1),Lt=({state:e,dispatch:t})=>yt(e,t,!0);function wt(e,t){let n=Je(e.state.selection,(e=>{let n=t(e);return p.EditorSelection.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(We(e.state,n)),!0)}function Dt(e,t){return wt(e,(n=>e.moveByChar(n,t)))}const St=e=>Dt(e,e.textDirection!=g.Direction.LTR),Ct=e=>Dt(e,e.textDirection==g.Direction.LTR),Mt=e=>Dt(e,!0),At=e=>Dt(e,!1);function Et(e,t){return wt(e,(n=>e.moveByGroup(n,t)))}const Ot=e=>Et(e,e.textDirection!=g.Direction.LTR),Tt=e=>Et(e,e.textDirection==g.Direction.LTR),jt=e=>Et(e,!0),Pt=e=>Et(e,!1),Rt=e=>wt(e,(t=>st(e.state,t,e.textDirection!=g.Direction.LTR))),Bt=e=>wt(e,(t=>st(e.state,t,e.textDirection==g.Direction.LTR)));function It(e,t){return wt(e,(n=>e.moveVertically(n,t)))}const Nt=e=>It(e,!1),Vt=e=>It(e,!0);function qt(e,t){return wt(e,(n=>e.moveVertically(n,t,e.dom.clientHeight)))}const Ft=e=>qt(e,!1),zt=e=>qt(e,!0),Ut=e=>wt(e,(t=>gt(e,t,!0))),Gt=e=>wt(e,(t=>gt(e,t,!1))),Ht=e=>wt(e,(t=>p.EditorSelection.cursor(e.visualLineAt(t.head).from))),Jt=e=>wt(e,(t=>p.EditorSelection.cursor(e.visualLineAt(t.head).to))),Wt=({state:e,dispatch:t})=>(t(We(e,{anchor:0})),!0),Qt=({state:e,dispatch:t})=>(t(We(e,{anchor:e.doc.length})),!0),$t=({state:e,dispatch:t})=>(t(We(e,{anchor:e.selection.main.anchor,head:0})),!0),Kt=({state:e,dispatch:t})=>(t(We(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),Xt=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},annotations:p.Transaction.userEvent.of("keyboardselection")})),!0),Yt=({state:e,dispatch:t})=>{let n=gn(e).map((({from:t,to:n})=>p.EditorSelection.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:p.EditorSelection.create(n),annotations:p.Transaction.userEvent.of("keyboardselection")})),!0},Zt=({state:e,dispatch:t})=>{let n=Je(e.selection,(t=>{var n;let o=Object(U.syntaxTree)(e).resolve(t.head,1);for(;!(o.from<t.from&&o.to>=t.to||o.to>t.to&&o.from<=t.from)&&(null===(n=o.parent)||void 0===n?void 0:n.parent);)o=o.parent;return p.EditorSelection.range(o.to,o.from)}));return t(We(e,n)),!0},_t=({state:e,dispatch:t})=>{let n=e.selection,o=null;return n.ranges.length>1?o=p.EditorSelection.create([n.main]):n.main.empty||(o=p.EditorSelection.create([p.EditorSelection.cursor(n.main.head)])),!!o&&(t(We(e,o)),!0)};function en({state:e,dispatch:t},n){let o=e.changeByRange((e=>{let{from:t,to:o}=e;if(t==o){let e=n(t);t=Math.min(t,e),o=Math.max(o,e)}return t==o?{range:e}:{changes:{from:t,to:o},range:p.EditorSelection.cursor(t)}}));return!o.changes.empty&&(t(e.update(o,{scrollIntoView:!0,annotations:p.Transaction.userEvent.of("delete")})),!0)}const tn=(e,t,n)=>en(e,(o=>{let i,r,{state:s}=e,a=s.doc.lineAt(o);if(!t&&o>a.from&&o<a.from+200&&!/[^ \t]/.test(i=a.text.slice(0,o-a.from))){if("\t"==i[i.length-1])return o-1;let e=Object(Re.d)(i,0,s.tabSize)%Object(U.getIndentUnit)(s)||Object(U.getIndentUnit)(s);for(let t=0;t<e&&" "==i[i.length-1-t];t++)o--;return o}if(n){let e=a.text.slice(o-a.from+(t?0:-2),o-a.from+(t?2:0)),n=e?Object(Re.c)(Object(Re.b)(e,0)):1;r=t?Math.min(s.doc.length,o+n):Math.max(0,o-n)}else r=Object(Re.e)(a.text,o-a.from,t)+a.from;return r==o&&a.number!=(t?s.doc.lines:1)&&(r+=t?1:-1),r})),nn=e=>tn(e,!1,!0),on=e=>tn(e,!0,!0),rn=e=>tn(e,!1,!1),sn=e=>tn(e,!0,!1),an=(e,t)=>en(e,(n=>{let o=n,{state:i}=e,r=i.doc.lineAt(o),s=i.charCategorizer(o);for(let e=null;;){if(o==(t?r.to:r.from)){o==n&&r.number!=(t?i.doc.lines:1)&&(o+=t?1:-1);break}let a=Object(Re.e)(r.text,o-r.from,t)+r.from,l=r.text.slice(Math.min(o,a)-r.from,Math.max(o,a)-r.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&o==n||(e=c),o=a}return o})),ln=e=>an(e,!1),cn=e=>an(e,!0),un=e=>en(e,(t=>{let n=e.visualLineAt(t).to;return t<n?n:Math.min(e.state.doc.length,t+1)})),hn=e=>en(e,(t=>{let n=e.visualLineAt(t).from;return t>n?n:Math.max(0,t-1)})),dn=({state:e,dispatch:t})=>{let n=[];for(let o=0,i="",r=e.doc.iter();;){if(r.next(),r.lineBreak||r.done){let e=i.search(/\s+$/);if(e>-1&&n.push({from:o-(i.length-e),to:o}),r.done)break;i=""}else i=r.value;o+=r.value.length}return!!n.length&&(t(e.update({changes:n})),!0)},fn=({state:e,dispatch:t})=>{let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Re.a.of(["",""])},range:p.EditorSelection.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,annotations:p.Transaction.userEvent.of("input")})),!0},mn=({state:e,dispatch:t})=>{let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,o=e.doc.lineAt(n),i=n==o.from?n-1:Object(Re.e)(o.text,n-o.from,!1)+o.from,r=n==o.to?n+1:Object(Re.e)(o.text,n-o.from,!0)+o.from;return{changes:{from:i,to:r,insert:e.doc.slice(n,r).append(e.doc.slice(i,n))},range:p.EditorSelection.cursor(r)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0})),!0)};function gn(e){let t=[],n=-1;for(let o of e.selection.ranges){let i=e.doc.lineAt(o.from),r=e.doc.lineAt(o.to);n==i.number?t[t.length-1].to=r.to:t.push({from:i.from,to:r.to}),n=r.number}return t}function pn(e,t,n){let o=[];for(let i of gn(e)){if(n?i.to==e.doc.length:0==i.from)continue;let t=e.doc.lineAt(n?i.to+1:i.from-1);n?o.push({from:i.to,to:t.to},{from:i.from,insert:t.text+e.lineBreak}):o.push({from:t.from,to:i.from},{from:i.to,insert:e.lineBreak+t.text})}return!!o.length&&(t(e.update({changes:o,scrollIntoView:!0})),!0)}const bn=({state:e,dispatch:t})=>pn(e,t,!1),xn=({state:e,dispatch:t})=>pn(e,t,!0);function vn(e,t,n){let o=[];for(let i of gn(e))n?o.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):o.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:o,scrollIntoView:!0})),!0}const yn=({state:e,dispatch:t})=>vn(e,t,!1),kn=({state:e,dispatch:t})=>vn(e,t,!0),Ln=e=>{let{state:t}=e,n=t.changes(gn(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),o=Je(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:o,scrollIntoView:!0}),!0},wn=({state:e,dispatch:t})=>(t(e.update(e.replaceSelection(e.lineBreak),{scrollIntoView:!0})),!0);const Dn=({state:e,dispatch:t})=>{let n=e.changeByRange((({from:t,to:n})=>{let o=t==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,o=Object(U.syntaxTree)(e).resolve(t),i=o.childBefore(t),r=o.childAfter(t);return i&&r&&i.to<=t&&r.from>=t&&(n=i.type.prop(Be.b.closedBy))&&n.indexOf(r.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}(e,t),i=new U.IndentContext(e,{simulateBreak:t,simulateDoubleBreak:!!o}),r=Object(U.getIndentation)(i,t);null==r&&(r=/^\s*/.exec(e.doc.lineAt(t).text)[0].length);let s=e.doc.lineAt(t);for(;n<s.to&&/\s/.test(s.text.slice(n-s.from,n+1-s.from));)n++;o?({from:t,to:n}=o):t>s.from&&t<s.from+100&&!/\S/.test(s.text.slice(0,t))&&(t=s.from);let a=["",Object(U.indentString)(e,r)];return o&&a.push(Object(U.indentString)(e,i.lineIndent(s))),{changes:{from:t,to:n,insert:Re.a.of(a)},range:p.EditorSelection.cursor(t+1+a[1].length)}}));return t(e.update(n,{scrollIntoView:!0})),!0};function Sn(e,t){let n=-1;return e.changeByRange((o=>{let i=[];for(let s=o.from;s<=o.to;){let r=e.doc.lineAt(s);r.number>n&&(o.empty||o.to>r.from)&&(t(r,i,o),n=r.number),s=r.to+1}let r=e.changes(i);return{changes:i,range:p.EditorSelection.range(r.mapPos(o.anchor,1),r.mapPos(o.head,1))}}))}const Cn=({state:e,dispatch:t})=>{let n=Object.create(null),o=new U.IndentContext(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=Sn(e,((t,i,r)=>{let s=Object(U.getIndentation)(o,t.from);if(null==s)return;let a=/^\s*/.exec(t.text)[0],l=Object(U.indentString)(e,s);(a!=l||r.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i)),!0},Mn=({state:e,dispatch:t})=>(t(e.update(Sn(e,((t,n)=>{n.push({from:t.from,insert:e.facet(U.indentUnit)})})))),!0),An=({state:e,dispatch:t})=>(t(e.update(Sn(e,((t,n)=>{let o=/^\s*/.exec(t.text)[0];if(!o)return;let i=Object(Re.d)(o,0,e.tabSize),r=0,s=Object(U.indentString)(e,Math.max(0,i-Object(U.getIndentUnit)(e)));for(;r<o.length&&r<s.length&&o.charCodeAt(r)==s.charCodeAt(r);)r++;n.push({from:t.from+r,to:t.from+o.length,insert:s.slice(r)})})))),!0),En=({state:e,dispatch:t})=>e.selection.ranges.some((e=>!e.empty))?Mn({state:e,dispatch:t}):(t(e.update(e.replaceSelection("\t"),{scrollIntoView:!0,annotations:p.Transaction.userEvent.of("input")})),!0),On=[{key:"Ctrl-b",run:Xe,shift:St},{key:"Ctrl-f",run:Ye,shift:Ct},{key:"Ctrl-p",run:ut,shift:Nt},{key:"Ctrl-n",run:ht,shift:Vt},{key:"Ctrl-a",run:xt,shift:Ht},{key:"Ctrl-e",run:vt,shift:Jt},{key:"Ctrl-d",run:sn},{key:"Ctrl-h",run:rn},{key:"Ctrl-k",run:un},{key:"Alt-d",run:cn},{key:"Ctrl-Alt-h",run:ln},{key:"Ctrl-o",run:fn},{key:"Ctrl-t",run:mn},{key:"Alt-f",run:ot,shift:jt},{key:"Alt-b",run:it,shift:Pt},{key:"Alt-<",run:Wt},{key:"Alt->",run:Qt},{key:"Ctrl-v",run:mt},{key:"Alt-v",run:ft}],Tn=[{key:"ArrowLeft",run:Xe,shift:St},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:tt,shift:Ot},{mac:"Cmd-ArrowLeft",run:xt,shift:Ht},{key:"ArrowRight",run:Ye,shift:Ct},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:nt,shift:Tt},{mac:"Cmd-ArrowRight",run:vt,shift:Jt},{key:"ArrowUp",run:ut,shift:Nt},{mac:"Cmd-ArrowUp",run:Wt,shift:$t},{mac:"Ctrl-ArrowUp",run:ft,shift:Ft},{key:"ArrowDown",run:ht,shift:Vt},{mac:"Cmd-ArrowDown",run:Qt,shift:Kt},{mac:"Ctrl-ArrowDown",run:mt,shift:zt},{key:"PageUp",run:ft,shift:Ft},{key:"PageDown",run:mt,shift:zt},{key:"Home",run:bt,shift:Gt},{key:"Mod-Home",run:Wt,shift:$t},{key:"End",run:pt,shift:Ut},{key:"Mod-End",run:Qt,shift:Kt},{key:"Enter",run:Dn},{key:"Mod-a",run:Xt},{key:"Backspace",run:nn,shift:nn},{key:"Delete",run:sn,shift:sn},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ln},{key:"Mod-Delete",mac:"Alt-Delete",run:cn},{mac:"Mod-Backspace",run:hn},{mac:"Mod-Delete",run:un}].concat(On.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),jn=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:at,shift:Rt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:lt,shift:Bt},{key:"Alt-ArrowUp",run:bn},{key:"Shift-Alt-ArrowUp",run:yn},{key:"Alt-ArrowDown",run:xn},{key:"Shift-Alt-ArrowDown",run:kn},{key:"Escape",run:_t},{key:"Alt-l",run:Yt},{key:"Mod-i",run:Zt},{key:"Mod-[",run:An},{key:"Mod-]",run:Mn},{key:"Mod-Alt-\\",run:Cn},{key:"Shift-Mod-k",run:Ln},{key:"Shift-Mod-\\",run:kt}].concat(Tn),Pn={key:"Tab",run:En,shift:Cn},Rn={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},Bn=p.StateEffect.define({map(e,t){let n=t.mapPos(e,-1,p.MapMode.TrackAfter);return null==n?void 0:n}}),In=p.StateEffect.define({map:(e,t)=>t.mapPos(e)}),Nn=new class extends G.d{};Nn.startSide=1,Nn.endSide=-1;const Vn=p.StateField.define({create:()=>G.b.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,o=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(o,-1)&&(e=G.b.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(Bn)?e=e.update({add:[Nn.range(n.value,n.value+1)]}):n.is(In)&&(e=e.update({filter:e=>e!=n.value}));return e}});function qn(){return[g.EditorView.inputHandler.of(Gn),Vn]}const Fn="()[]{}<>";function zn(e){for(let t=0;t<Fn.length;t+=2)if(Fn.charCodeAt(t)==e)return Fn.charAt(t+1);return Object(Re.g)(e<128?e:e+1)}function Un(e,t){return e.languageDataAt("closeBrackets",t)[0]||Rn}function Gn(e,t,n,o){if(e.composing)return!1;let i=e.state.selection.main;if(o.length>2||2==o.length&&1==Object(Re.c)(Object(Re.b)(o,0))||t!=i.from||n!=i.to)return!1;let r=Wn(e.state,o);return!!r&&(e.dispatch(r),!0)}const Hn=({state:e,dispatch:t})=>{let n=Un(e,e.selection.main.head).brackets||Rn.brackets,o=null,i=e.changeByRange((t=>{if(t.empty){let o=function(e,t){let n=e.sliceString(t-2,t);return Object(Re.c)(Object(Re.b)(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==o&&$n(e.doc,t.head)==zn(Object(Re.b)(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:p.EditorSelection.cursor(t.head-i.length),annotations:p.Transaction.userEvent.of("delete")}}return{range:o=t}}));return o||t(e.update(i,{scrollIntoView:!0})),!o},Jn=[{key:"Backspace",run:Hn}];function Wn(e,t){let n=Un(e,e.selection.main.head),o=n.brackets||Rn.brackets;for(let i of o){let r=zn(Object(Re.b)(i,0));if(t==i)return r==i?Yn(e,i,o.indexOf(i+i+i)>-1):Kn(e,i,r,n.before||Rn.before);if(t==r&&Qn(e,e.selection.main.from))return Xn(e,i,r)}return null}function Qn(e,t){let n=!1;return e.field(Vn).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function $n(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Object(Re.c)(Object(Re.b)(n,0)))}function Kn(e,t,n,o){let i=null,r=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:n,from:r.to}],effects:Bn.of(r.to+t.length),range:p.EditorSelection.range(r.anchor+t.length,r.head+t.length)};let s=$n(e.doc,r.head);return!s||/\s/.test(s)||o.indexOf(s)>-1?{changes:{insert:t+n,from:r.head},effects:Bn.of(r.head+t.length),range:p.EditorSelection.cursor(r.head+t.length)}:{range:i=r}}));return i?null:e.update(r,{scrollIntoView:!0,annotations:p.Transaction.userEvent.of("input")})}function Xn(e,t,n){let o=null,i=e.selection.ranges.map((t=>t.empty&&$n(e.doc,t.head)==n?p.EditorSelection.cursor(t.head+n.length):o=t));return o?null:e.update({selection:p.EditorSelection.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>In.of(e)))})}function Yn(e,t,n){let o=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:Bn.of(i.to+t.length),range:p.EditorSelection.range(i.anchor+t.length,i.head+t.length)};let r=i.head,s=$n(e.doc,r);if(s==t){if(Zn(e,r))return{changes:{insert:t+t,from:r},effects:Bn.of(r+t.length),range:p.EditorSelection.cursor(r+t.length)};if(Qn(e,r)){let o=n&&e.sliceDoc(r,r+3*t.length)==t+t+t;return{range:p.EditorSelection.cursor(r+t.length*(o?3:1)),effects:In.of(r)}}}else{if(n&&e.sliceDoc(r-2*t.length,r)==t+t&&Zn(e,r-2*t.length))return{changes:{insert:t+t+t+t,from:r},effects:Bn.of(r+t.length),range:p.EditorSelection.cursor(r+t.length)};if(e.charCategorizer(r)(s)!=p.CharCategory.Word){let n=e.sliceDoc(r-1,r);if(n!=t&&e.charCategorizer(r)(n)!=p.CharCategory.Word)return{changes:{insert:t+t,from:r},effects:Bn.of(r+t.length),range:p.EditorSelection.cursor(r+t.length)}}}return{range:o=i}}));return o?null:e.update(i,{scrollIntoView:!0,annotations:p.Transaction.userEvent.of("input")})}function Zn(e,t){let n=Object(U.syntaxTree)(e).resolve(t+1);return n.parent&&n.from==t}const _n=p.Facet.define({combine(e){let t,n;for(let o of e)t=t||o.topContainer,n=n||o.bottomContainer;return{topContainer:t,bottomContainer:n}}});function eo(e,t){let n=e.plugin(to),o=n?n.specs.indexOf(t):-1;return o>-1?n.panels[o]:null}const to=g.ViewPlugin.fromClass(class{constructor(e){this.input=e.state.facet(ro),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(_n);this.top=new no(e,!0,t.topContainer),this.bottom=new no(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.class&&n.dom.classList.add(n.class),n.mount&&n.mount()}update(e){let t=e.state.facet(_n);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new no(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new no(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(ro);if(n!=this.input){let t=n.filter((e=>e)),o=[],i=[],r=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),o.push(t),(t.top?i:r).push(t)}this.specs=t,this.panels=o,this.top.sync(i),this.bottom.sync(r);for(let e of s)e.dom.classList.add("cm-panel"),e.class&&e.dom.classList.add(e.class),e.mount&&e.mount()}else for(let o of this.panels)o.update&&o.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:g.PluginField.scrollMargins.from((e=>({top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()})))});class no{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=oo(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=oo(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-this.view.scrollDOM.getBoundingClientRect().top:this.view.scrollDOM.getBoundingClientRect().bottom-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function oo(e){let t=e.nextSibling;return e.remove(),t}const io=g.EditorView.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),ro=p.Facet.define({enables:[to,io]});function so(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=n[o];"string"==typeof i?e.setAttribute(o,i):null!=i&&(e[o]=i)}t++}for(;t<arguments.length;t++)ao(e,arguments[t]);return e}function ao(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)ao(e,t[n])}}const lo="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class co{constructor(e,t,n=0,o=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,o),this.bufferStart=n,this.normalize=i?e=>i(lo(e)):lo,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Object(Re.b)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Object(Re.g)(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Object(Re.c)(e);let o=this.normalize(t);for(let i=0,r=n;;i++){let e=o.charCodeAt(i),s=this.match(e,r);if(s)return this.value=s,this;if(i==o.length-1)break;r==n&&i<t.length&&t.charCodeAt(i)==e&&r++}}}match(e,t){let n=null;for(let o=0;o<this.matches.length;o+=2){let i=this.matches[o],r=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[o+1],to:t+1}:(this.matches[o]++,r=!0)),r||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}const uo={from:-1,to:-1,match:/.*/.exec("")},ho="gm"+(null==/x/.unicode?"":"u");class fo{constructor(e,t,n,o=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=uo,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new po(e,t,n,o,i);this.re=new RegExp(t,ho+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.iter=e.iter();let r=e.lineAt(o);this.curLineStart=r.from,this.matchPos=o,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,o=n+t[0].length;if(this.matchPos=o+(n==o?1:0),n==this.curLine.length&&this.nextLine(),n<o||n>this.value.to)return this.value={from:n,to:o,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const mo=new WeakMap;class go{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let o=mo.get(e);if(!o||o.from>=n||o.to<=t){let o=new go(t,e.sliceString(t,n));return mo.set(e,o),o}if(o.from==t&&o.to==n)return o;let{text:i,from:r}=o;return r>t&&(i=e.sliceString(t,r)+i,r=t),o.to<n&&(i+=e.sliceString(o.to,n)),mo.set(e,new go(r,i)),new go(t,i.slice(t-r,n-r))}}class po{constructor(e,t,n,o,i){this.text=e,this.to=i,this.done=!1,this.value=uo,this.matchPos=o,this.re=new RegExp(t,ho+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.flat=go.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=go.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function bo(e){let t=so("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:o}=e,i=o.doc.lineAt(o.selection.main.head),[,r,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;r&&(e=e*("-"==r?-1:1)+i.number/o.doc.lines),u=Math.round(o.doc.lines*e)}else s&&r&&(u=u*("-"==r?-1:1)+i.number);let h=o.doc.line(Math.max(1,Math.min(o.doc.lines,u)));e.dispatch({effects:xo.of(!1),selection:p.EditorSelection.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:so("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:xo.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},so("label",e.state.phrase("Go to line"),": ",t)," ",so("button",{class:"cm-button",type:"submit"},e.state.phrase("go"))),pos:-10}}const xo=p.StateEffect.define(),vo=p.StateField.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(xo)&&(e=n.value);return e},provide:e=>ro.from(e,(e=>e?bo:null))}),yo=e=>{let t=eo(e,bo);if(!t){let n=[xo.of(!0)];null==e.state.field(vo,!1)&&n.push(p.StateEffect.appendConfig.of([vo,ko])),e.dispatch({effects:n}),t=eo(e,bo)}return t&&t.dom.querySelector("input").focus(),!0},ko=g.EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Lo={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},wo=p.Facet.define({combine:e=>Object(p.combineConfig)(e,Lo,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function Do(e){let t=[Ao,Mo];return e&&t.push(wo.of(e)),t}const So=g.Decoration.mark({class:"cm-selectionMatch"}),Co=g.Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"}),Mo=g.ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(wo),{state:n}=e,o=n.selection;if(o.ranges.length>1)return g.Decoration.none;let i,r=o.main,s=null;if(r.empty){if(!t.highlightWordAroundCursor)return g.Decoration.none;if(s=n.charCategorizer(r.head),i=function(e,t,n){let o=e.lineAt(t),i=t-o.from,r=t-o.from;for(;i>0;){let e=Object(Re.e)(o.text,i,!1);if(n(o.text.slice(e,i))!=p.CharCategory.Word)break;i=e}for(;r<o.length;){let e=Object(Re.e)(o.text,r);if(n(o.text.slice(r,e))!=p.CharCategory.Word)break;r=e}return i==r?null:o.text.slice(i,r)}(n.doc,r.head,s),!i)return g.Decoration.none}else{let e=r.to-r.from;if(e<t.minSelectionLength||e>200)return g.Decoration.none;if(i=n.sliceDoc(r.from,r.to).trim(),!i)return g.Decoration.none}let a=[];for(let l of e.visibleRanges){let e=new co(n.doc,i,l.from,l.to);for(;!e.nextOverlapping().done;){let{from:o,to:i}=e.value;if((!s||(0==o||s(n.sliceDoc(o-1,o))!=p.CharCategory.Word)&&(i==n.doc.length||s(n.sliceDoc(i,i+1))!=p.CharCategory.Word))&&(s&&o<=r.from&&i>=r.to?a.push(Co.range(o,i)):(o>=r.to||i<=r.from)&&a.push(So.range(o,i)),a.length>t.maxMatches))return g.Decoration.none}}return g.Decoration.set(a)}},{decorations:e=>e.decorations}),Ao=g.EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});class Eo{constructor(e,t,n){this.search=e,this.replace=t,this.caseInsensitive=n}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseInsensitive==e.caseInsensitive&&this.constructor==e.constructor}}class Oo extends Eo{constructor(e,t,n){super(e,t,n),this.unquoted=e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}cursor(e,t=0,n=e.length){return new co(e,this.unquoted,t,n,this.caseInsensitive?e=>e.toLowerCase():void 0)}nextMatch(e,t,n){let o=this.cursor(e,n).nextOverlapping();return o.done&&(o=this.cursor(e,0,t).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,t,n){for(let o=n;;){let n=Math.max(t,o-1e4-this.unquoted.length),i=this.cursor(e,n,o),r=null;for(;!i.nextOverlapping().done;)r=i.value;if(r)return r;if(n==t)return null;o-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.replace}matchAll(e,t){let n=this.cursor(e),o=[];for(;!n.next().done;){if(o.length>=t)return null;o.push(n.value)}return o}highlight(e,t,n,o){let i=this.cursor(e,Math.max(0,t-this.unquoted.length),Math.min(n+this.unquoted.length,e.length));for(;!i.next().done;)o(i.value.from,i.value.to)}get valid(){return!!this.search}}class To extends Eo{constructor(e,t,n){super(e,t,n),this.valid=!!e&&function(e){try{return new RegExp(e,ho),!0}catch(t){return!1}}(e)}cursor(e,t=0,n=e.length){return new fo(e,this.search,this.caseInsensitive?{ignoreCase:!0}:void 0,t,n)}nextMatch(e,t,n){let o=this.cursor(e,n).next();return o.done&&(o=this.cursor(e,0,t).next()),o.done?null:o.value}prevMatchInRange(e,t,n){for(let o=1;;o++){let i=Math.max(t,n-1e4*o),r=this.cursor(e,i,n),s=null;for(;!r.next().done;)s=r.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=this.cursor(e),o=[];for(;!n.next().done;){if(o.length>=t)return null;o.push(n.value)}return o}highlight(e,t,n,o){let i=this.cursor(e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)o(i.value.from,i.value.to)}}const jo=p.StateEffect.define(),Po=p.StateEffect.define(),Ro=p.StateField.define({create:()=>new Bo(new Oo("","",!1),null),update(e,t){for(let n of t.effects)n.is(jo)?e=new Bo(n.value,e.panel):n.is(Po)&&(e=new Bo(e.query,n.value?Wo:null));return e},provide:e=>ro.from(e,(e=>e.panel))});class Bo{constructor(e,t){this.query=e,this.panel=t}}const Io=g.Decoration.mark({class:"cm-searchMatch"}),No=g.Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Vo=g.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(Ro))}update(e){let t=e.state.field(Ro);(t!=e.startState.field(Ro)||e.docChanged||e.selectionSet)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.valid)return g.Decoration.none;let{view:n}=this,o=new G.c;for(let i=0,r=n.visibleRanges,s=r.length;i<s;i++){let{from:t,to:a}=r[i];for(;i<s-1&&a>r[i+1].from-500;)a=r[++i].to;e.highlight(n.state.doc,t,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));o.add(e,t,i?No:Io)}))}return o.finish()}},{decorations:e=>e.decorations});function qo(e){return t=>{let n=t.state.field(Ro,!1);return n&&n.query.valid?e(t,n):Qo(t)}}const Fo=qo(((e,{query:t})=>{let{from:n,to:o}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,o);return!(!i||i.from==n&&i.to==o)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Zo(e,i)}),!0)})),zo=qo(((e,{query:t})=>{let{state:n}=e,{from:o,to:i}=n.selection.main,r=t.prevMatch(n.doc,o,i);return!!r&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Zo(e,r)}),!0)})),Uo=qo(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:p.EditorSelection.create(n.map((e=>p.EditorSelection.range(e.from,e.to))))}),!0)})),Go=({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:o,to:i}=n.main,r=[],s=0;for(let a=new co(e.doc,e.sliceDoc(o,i));!a.next().done;){if(r.length>1e3)return!1;a.value.from==o&&(s=r.length),r.push(p.EditorSelection.range(a.value.from,a.value.to))}return t(e.update({selection:p.EditorSelection.create(r,s)})),!0},Ho=qo(((e,{query:t})=>{let{state:n}=e,{from:o,to:i}=n.selection.main,r=t.nextMatch(n.doc,o,o);if(!r)return!1;let s,a,l=[];if(r.from==o&&r.to==i&&(a=n.toText(t.getReplacement(r)),l.push({from:r.from,to:r.to,insert:a}),r=t.nextMatch(n.doc,r.from,r.to)),r){let e=0==l.length||l[0].from>=r.to?0:r.to-r.from-a.length;s={anchor:r.from-e,head:r.to-e}}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:r?Zo(e,r):void 0}),!0})),Jo=qo(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:o}=e;return{from:n,to:o,insert:t.getReplacement(e)}}));return!!n.length&&(e.dispatch({changes:n}),!0)}));function Wo(e){let{query:t}=e.state.field(Ro);return{dom:Xo({view:e,query:t,updateQuery(n){t.eq(n)||(t=n,e.dispatch({effects:jo.of(t)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80}}const Qo=e=>{let t=e.state.field(Ro,!1);if(t&&t.panel){let t=eo(e,Wo);if(!t)return!1;t.dom.querySelector("[name=search]").focus()}else e.dispatch({effects:[Po.of(!0),...t?[]:[p.StateEffect.appendConfig.of(ei)]]});return!0},$o=e=>{let t=e.state.field(Ro,!1);if(!t||!t.panel)return!1;let n=eo(e,Wo);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Po.of(!1)}),!0},Ko=[{key:"Mod-f",run:Qo,scope:"editor search-panel"},{key:"F3",run:Fo,shift:zo,scope:"editor search-panel"},{key:"Mod-g",run:Fo,shift:zo,scope:"editor search-panel"},{key:"Escape",run:$o,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Go},{key:"Alt-g",run:yo}];function Xo(e){function t(t){return e.view.state.phrase(t)}let n=so("input",{value:e.query.search,placeholder:t("Find"),"aria-label":t("Find"),class:"cm-textfield",name:"search",onchange:s,onkeyup:s}),o=so("input",{value:e.query.replace,placeholder:t("Replace"),"aria-label":t("Replace"),class:"cm-textfield",name:"replace",onchange:s,onkeyup:s}),i=so("input",{type:"checkbox",name:"case",checked:!e.query.caseInsensitive,onchange:s}),r=so("input",{type:"checkbox",name:"re",checked:e.query instanceof To,onchange:s});function s(){e.updateQuery(new(r.checked?To:Oo)(n.value,o.value,!i.checked))}function a(e,t,n){return so("button",{class:"cm-button",name:e,onclick:t},n)}return so("div",{onkeydown:function(t){Object(g.runScopeHandlers)(e.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==n?(t.preventDefault(),(t.shiftKey?zo:Fo)(e.view)):13==t.keyCode&&t.target==o&&(t.preventDefault(),Ho(e.view))},class:"cm-search"},[n,a("next",(()=>Fo(e.view)),[t("next")]),a("prev",(()=>zo(e.view)),[t("previous")]),a("select",(()=>Uo(e.view)),[t("all")]),so("label",null,[i,t("match case")]),so("label",null,[r,t("regexp")]),so("br"),o,a("replace",(()=>Ho(e.view)),[t("replace")]),a("replaceAll",(()=>Jo(e.view)),[t("replace all")]),so("button",{name:"close",onclick:()=>$o(e.view),"aria-label":t("close")},["\xd7"])])}const Yo=/[\s\.,:;?!]/;function Zo(e,{from:t,to:n}){let o=e.state.doc.lineAt(t).from,i=e.state.doc.lineAt(n).to,r=Math.max(o,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(r,s);if(r!=o)for(let l=0;l<30;l++)if(!Yo.test(a[l+1])&&Yo.test(a[l])){a=a.slice(l);break}if(s!=i)for(let l=a.length-1;l>a.length-30;l--)if(!Yo.test(a[l-1])&&Yo.test(a[l])){a=a.slice(0,l);break}return g.EditorView.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${e.state.doc.lineAt(t).number}`)}const _o=g.EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ei=[Ro,p.Prec.override(Vo),_o];var ti=n("1FcE");const ni=e=>{let t=hi(e.state);return t.line?ii(e):!!t.block&&ai(e)};function oi(e,t){return({state:n,dispatch:o})=>{let i=e(t,n.selection.ranges,n);return!!i&&(o(n.update(i)),!0)}}const ii=oi(fi,0),ri=oi(fi,1),si=oi(fi,2),ai=oi(di,0),li=oi(di,1),ci=oi(di,2),ui=[{key:"Mod-/",run:ni},{key:"Alt-A",run:ai}];function hi(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function di(e,t,n){let o=t.map((e=>hi(n,e.from).block));if(!o.every((e=>e)))return null;let i=t.map(((e,t)=>function(e,{open:t,close:n},o,i){let r,s,a=e.sliceDoc(o-50,o),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:o-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-o<=100?r=s=e.sliceDoc(o,i):(r=e.sliceDoc(o,o+50),s=e.sliceDoc(i-50,i));let d=/^\s*/.exec(r)[0].length,f=/\s*$/.exec(s)[0].length,m=s.length-f-n.length;return r.slice(d,d+t.length)==t&&s.slice(m,m+n.length)==n?{open:{pos:o+d+t.length,margin:/\s/.test(r.charAt(d+t.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(s.charAt(m-1))?1:0}}:null}(n,o[t],e.from,e.to)));if(2!=e&&!i.every((e=>e))){let e=0;return n.changeByRange((t=>{let{open:n,close:r}=o[e++];if(i[e])return{range:t};let s=n.length+1;return{changes:[{from:t.from,insert:n+" "},{from:t.to,insert:" "+r}],range:p.EditorSelection.range(t.anchor+s,t.head+s)}}))}if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=o[n],{open:r,close:s}=t;e.push({from:r.pos-i.open.length,to:r.pos+r.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function fi(e,t,n){let o=[],i=-1;for(let{from:r,to:s}of t){let e=o.length,t=1e9;for(let a=r;a<=s;){let e=n.doc.lineAt(a);if(e.from>i&&(r==s||s>e.from)){i=e.from;let r=hi(n,a).line;if(!r)continue;let s=/^\s*/.exec(e.text)[0].length,l=e.text.slice(s,s+r.length)==r?s:-1;s<e.text.length&&s<t&&(t=s),o.push({line:e,comment:l,token:r,indent:s,single:!1})}a=e.to+1}if(t<1e9)for(let n=e;n<o.length;n++)o[n].indent<o[n].line.text.length&&(o[n].indent=t);o.length==e+1&&(o[e].single=!0)}if(1!=e&&o.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of o)if(n>=0){let o=t.from+n,r=o+i.length;" "==t.text[r-t.from]&&r++,e.push({from:o,to:r})}return{changes:e}}if(2!=e&&o.some((e=>e.comment<0))){let e=[];for(let{line:n,comment:i,token:r,indent:s,single:a}of o)i!=s&&(a||/\S/.test(n.text))&&e.push({from:n.from+s,insert:r+" "});let t=n.changes(e);return{changes:t,selection:n.selection.map(t,1)}}return null}const mi=2e3;function gi(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY});if(null==n)return null;let o=e.state.doc.lineAt(n),i=n-o.from,r=i>mi?-1:i==o.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Object(Re.d)(o.text.slice(0,n-o.from),0,e.state.tabSize);return{line:o.number,col:r,off:i}}function pi(e,t){let n=gi(e,t),o=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},o=o.map(e.changes)}},get(t,i,r){let s=gi(e,t);if(!s)return o;let a=function(e,t,n){let o=Math.min(t.line,n.line),i=Math.max(t.line,n.line),r=[];if(t.off>mi||n.off>mi||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=o;t<=i;t++){let n=e.doc.line(t);n.length<=a&&r.push(p.EditorSelection.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=o;t<=i;t++){let n=e.doc.line(t),o=n.length>mi?n.text.slice(0,2*a):n.text,i=Object(Re.f)(o,0,s,e.tabSize),l=Object(Re.f)(o,0,a,e.tabSize);i.leftOver||r.push(p.EditorSelection.range(n.from+i.offset,n.from+l.offset))}}return r}(e.state,n,s);return a.length?r?p.EditorSelection.create(a.concat(o.ranges)):p.EditorSelection.create(a):o}}:null}function bi(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return g.EditorView.mouseSelectionStyle.of(((e,n)=>t(n)?pi(e,n):null))}var xi=n("ubVE"),vi=n("fK0Z");class yi{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class ki{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}}function Li(e,t=null,n=0){let o=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return o=new yi(e,n,i.diagnostic),!1})),o}function wi(e,t){return e.field(Ai,!1)?t:t.concat(p.StateEffect.appendConfig.of([Ai,g.EditorView.decorations.compute([Ai],(e=>{let{selected:t,panel:n}=e.field(Ai);return t&&n&&t.from!=t.to?g.Decoration.set([Ei.range(t.from,t.to)]):g.Decoration.none})),Object(vi.hoverTooltip)(Oi),Gi]))}function Di(e,t){return{effects:wi(e,[Si.of(t)])}}const Si=p.StateEffect.define(),Ci=p.StateEffect.define(),Mi=p.StateEffect.define(),Ai=p.StateField.define({create:()=>new ki(g.Decoration.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),o=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);o=Li(n,e.selected.diagnostic,i)||Li(n,null,i)}e=new ki(n,e.panel,o)}for(let n of t.effects)if(n.is(Si)){let t=g.Decoration.set(n.value.map((e=>e.from<e.to?g.Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to):g.Decoration.widget({widget:new qi(e),diagnostic:e}).range(e.from))));e=new ki(t,e.panel,Li(t))}else n.is(Ci)?e=new ki(e.diagnostics,n.value?zi.open:null,e.selected):n.is(Mi)&&(e=new ki(e.diagnostics,e.panel,n.value));return e},provide:e=>[ro.from(e,(e=>e.panel)),g.EditorView.decorations.from(e,(e=>e.diagnostics))]}),Ei=g.Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function Oi(e,t,n){let{diagnostics:o}=e.state.field(Ai),i=[],r=2e8,s=0;return o.between(t-(n<0?1:0),t+(n>0?1:0),((e,o,{spec:a})=>{t>=e&&t<=o&&(e==o||(t>e||n>0)&&(t<o||n<0))&&(i.push(a.diagnostic),r=Math.min(e,r),s=Math.max(o,s))})),i.length?{pos:r,end:s,above:e.state.doc.lineAt(r).to<s,create:()=>({dom:so("ul",{class:"cm-tooltip-lint"},i.map((t=>Vi(e,t,!1))))})}:null}const Ti=e=>{let t=e.state.field(Ai,!1);t&&t.panel||e.dispatch({effects:wi(e.state,[Ci.of(!0)])});let n=eo(e,zi.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ji=e=>{let t=e.state.field(Ai,!1);return!(!t||!t.panel)&&(e.dispatch({effects:Ci.of(!1)}),!0)},Pi=e=>{let t=e.state.field(Ai,!1);if(!t)return!1;let n=e.state.selection.main,o=t.diagnostics.iter(n.to+1);return!(!o.value&&(o=t.diagnostics.iter(0),!o.value||o.from==n.from&&o.to==n.to))&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)},Ri=[{key:"Mod-Shift-m",run:Ti},{key:"F8",run:Pi}],Bi=500;function Ii(e){return g.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.lintTime=Date.now()+Bi,this.set=!0,this.run=this.run.bind(this),setTimeout(this.run,Bi)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view;Promise.resolve(e(this.view)).then((e=>{var n,o;this.view.state.doc==t.doc&&(e.length||(null===(o=null===(n=this.view.state.field(Ai,!1))||void 0===n?void 0:n.diagnostics)||void 0===o?void 0:o.size))&&this.view.dispatch(Di(this.view.state,e))}),(e=>{Object(g.logException)(this.view.state,e)}))}}update(e){e.docChanged&&(this.lintTime=Date.now()+Bi,this.set||(this.set=!0,setTimeout(this.run,Bi)))}})}function Ni(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let o=n[e];if(/[a-zA-Z]/.test(o)&&!t.some((e=>e.toLowerCase()==o.toLowerCase()))){t.push(o);continue e}}t.push("")}return t}function Vi(e,t,n){var o;let i=n?Ni(t.actions):[];return so("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},so("span",{class:"cm-diagnosticText"},t.message),null===(o=t.actions)||void 0===o?void 0:o.map(((n,o)=>{let r=o=>{o.preventDefault();let i=Li(e.state.field(Ai).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,a=i[o]?s.indexOf(i[o]):-1,l=a<0?s:[s.slice(0,a),so("u",s.slice(a,a+1)),s.slice(a+1)];return so("button",{class:"cm-diagnosticAction",onclick:r,onmousedown:r,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[o]})"`}.`},l)})),t.source&&so("div",{class:"cm-diagnosticSource"},t.source))}class qi extends g.WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return so("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Fi{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Vi(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class zi{constructor(e){this.view=e,this.items=[];this.list=so("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)ji(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.items.length))return;{let{diagnostic:n}=this.items[this.selectedIndex],o=Ni(n.actions);for(let i=0;i<o.length;i++)if(o[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=Li(this.view.state.field(Ai).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=so("div",{class:"cm-panel-lint"},this.list,so("button",{name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ji(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(Ai).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ai),n=0,o=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,r,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new Fi(this.view,s.diagnostic),this.items.splice(n,0,a),o=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),o=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new Fi(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.items.length||this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t();this.list.firstChild||this.list.appendChild(Vi(this.view,{severity:"info",message:this.view.state.phrase("No diagnostics")},!0))}moveSelection(e){if(0==this.items.length)return;let t=Li(this.view.state.field(Ai).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Mi.of(t)})}static open(e){return new zi(e)}}function Ui(e){if("function"!=typeof btoa)return"none";return`url('data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">\n    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>\n  </svg>`)}')`}const Gi=g.EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},".cm-lintRange-error":{backgroundImage:Ui("#d11")},".cm-lintRange-warning":{backgroundImage:Ui("orange")},".cm-lintRange-info":{backgroundImage:Ui("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}},".cm-tooltip.cm-tooltip-lint":{padding:0,margin:0}}),Hi="#e06c75",Ji="#abb2bf",Wi="#7d8799",Qi="#d19a66",$i="#21252b",Ki="#2c313a",Xi="#282c34",Yi="#3E4451",Zi="#528bff",_i=g.EditorView.theme({"&":{color:Ji,backgroundColor:Xi,"& ::selection":{backgroundColor:Yi},caretColor:Zi},"&.cm-focused .cm-cursor":{borderLeftColor:Zi},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:Yi},".cm-panels":{backgroundColor:$i,color:Ji},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:Ki},".cm-selectionMatch":{backgroundColor:"#aafe661a"},".cm-matchingBracket, .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:Xi,color:Wi,border:"none"},".cm-lineNumbers .cm-gutterElement":{color:"inherit"},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid #181a1f",backgroundColor:$i},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ki,color:Ji}}},{dark:!0}),er=xi.HighlightStyle.define([{tag:xi.tags.keyword,color:"#c678dd"},{tag:[xi.tags.name,xi.tags.deleted,xi.tags.character,xi.tags.propertyName,xi.tags.macroName],color:Hi},{tag:[xi.tags.function(xi.tags.variableName),xi.tags.labelName],color:"#61afef"},{tag:[xi.tags.color,xi.tags.constant(xi.tags.name),xi.tags.standard(xi.tags.name)],color:Qi},{tag:[xi.tags.definition(xi.tags.name),xi.tags.separator],color:Ji},{tag:[xi.tags.typeName,xi.tags.className,xi.tags.number,xi.tags.changed,xi.tags.annotation,xi.tags.modifier,xi.tags.self,xi.tags.namespace],color:"#e5c07b"},{tag:[xi.tags.operator,xi.tags.operatorKeyword,xi.tags.url,xi.tags.escape,xi.tags.regexp,xi.tags.link,xi.tags.special(xi.tags.string)],color:"#56b6c2"},{tag:[xi.tags.meta,xi.tags.comment],color:Wi},{tag:xi.tags.strong,fontWeight:"bold"},{tag:xi.tags.emphasis,fontStyle:"italic"},{tag:xi.tags.link,color:Wi,textDecoration:"underline"},{tag:xi.tags.heading,fontWeight:"bold",color:Hi},{tag:[xi.tags.atom,xi.tags.bool,xi.tags.special(xi.tags.variableName)],color:Qi},{tag:[xi.tags.processingInstruction,xi.tags.string,xi.tags.inserted],color:"#98c379"},{tag:xi.tags.invalid,color:"#ffffff"}]),tr=[_i,er]}}]);